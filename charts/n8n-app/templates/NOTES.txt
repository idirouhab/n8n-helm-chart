{{- if .Values.ingress.enabled }}
{{- range .Values.ingress.hosts }}

ğŸ‰ n8n has been successfully deployed!

Your n8n instance is available at:
  https://{{ .host }}

{{- end }}
{{- else }}

ğŸ‰ n8n has been successfully deployed!

To access n8n, run the following commands:

1. Get the service URL:
   kubectl get service {{ include "n8n.fullname" . }}-main{{- if .Release.Namespace }} --namespace {{ .Release.Namespace }}{{- end }}

2. Port forward to access n8n locally:
   kubectl port-forward service/{{ include "n8n.fullname" . }}-main{{- if .Release.Namespace }} --namespace {{ .Release.Namespace }}{{- end }} 5678:{{ .Values.service.port }}

3. Open your browser to:
   http://localhost:5678

{{- end }}

ğŸ“Š Deployment Configuration:
  â€¢ Mode: Queue ({{ .Values.queueMode.workerReplicaCount }} workers)
{{- if .Values.multiMain.enabled }}
  â€¢ Multi-main: {{ .Values.multiMain.replicas }} main pods
{{- else }}
  â€¢ Main pods: {{ .Values.replicaCount }}
{{- end }}
{{- if .Values.webhookProcessor.enabled }}
  â€¢ Webhook processors: {{ .Values.webhookProcessor.replicaCount }} pods
{{- end }}
  â€¢ Database: PostgreSQL ({{ .Values.database.host }})
  â€¢ Cache: Redis ({{ .Values.redis.host }})
{{- if .Values.s3.enabled }}
  â€¢ Storage: S3 ({{ .Values.s3.bucket.name }})
{{- end }}

ğŸ” Security:
  â€¢ RBAC: {{ if .Values.rbac.create }}Enabled{{ else }}Disabled{{ end }}
  â€¢ Service Account: {{ default (include "n8n.fullname" .) .Values.serviceAccount.name }}
{{- if .Values.networkPolicy.enabled }}
  â€¢ Network Policy: Enabled
{{- end }}

ğŸ“ˆ Scaling:
{{- if .Values.hpa.main.enabled }}
  â€¢ Main HPA: {{ .Values.hpa.main.minReplicas }}-{{ .Values.hpa.main.maxReplicas }} replicas
{{- end }}
{{- if .Values.hpa.worker.enabled }}
  â€¢ Worker HPA: {{ .Values.hpa.worker.minReplicas }}-{{ .Values.hpa.worker.maxReplicas }} replicas
{{- end }}
{{- if .Values.hpa.webhookProcessor.enabled }}
  â€¢ Webhook HPA: {{ .Values.hpa.webhookProcessor.minReplicas }}-{{ .Values.hpa.webhookProcessor.maxReplicas }} replicas
{{- end }}

ğŸ’¡ Next Steps:
  1. Configure your first workflow
  2. Set up webhook endpoints for external integrations
  3. Review the execution data retention policies
  4. Monitor resource usage and adjust HPA settings if needed

ğŸ“š Documentation: https://docs.n8n.io/
ğŸ› Issues: https://github.com/idirouhab/n8n-helm-chart/issues

Happy automating! ğŸš€
