{{- if .Values.ingress.enabled }}
{{- range .Values.ingress.hosts }}

🎉 n8n has been successfully deployed!

Your n8n instance is available at:
  https://{{ .host }}

{{- end }}
{{- else }}

🎉 n8n has been successfully deployed!

To access n8n, run the following commands:

1. Get the service URL:
   kubectl get service {{ include "n8n.fullname" . }}-main{{- if .Release.Namespace }} --namespace {{ .Release.Namespace }}{{- end }}

2. Port forward to access n8n locally:
   kubectl port-forward service/{{ include "n8n.fullname" . }}-main{{- if .Release.Namespace }} --namespace {{ .Release.Namespace }}{{- end }} 5678:{{ .Values.service.port }}

3. Open your browser to:
   http://localhost:5678

{{- end }}

📊 Deployment Configuration:
  • Mode: Queue ({{ .Values.queueMode.workerReplicaCount }} workers)
{{- if .Values.multiMain.enabled }}
  • Multi-main: {{ .Values.multiMain.replicas }} main pods
{{- else }}
  • Main pods: {{ .Values.replicaCount }}
{{- end }}
{{- if .Values.webhookProcessor.enabled }}
  • Webhook processors: {{ .Values.webhookProcessor.replicaCount }} pods
{{- end }}
  • Database: PostgreSQL ({{ .Values.database.host }})
  • Cache: Redis ({{ .Values.redis.host }})
{{- if .Values.s3.enabled }}
  • Storage: S3 ({{ .Values.s3.bucket.name }})
{{- end }}

🔐 Security:
  • RBAC: {{ if .Values.rbac.create }}Enabled{{ else }}Disabled{{ end }}
  • Service Account: {{ default (include "n8n.fullname" .) .Values.serviceAccount.name }}
{{- if .Values.networkPolicy.enabled }}
  • Network Policy: Enabled
{{- end }}

📈 Scaling:
{{- if .Values.hpa.main.enabled }}
  • Main HPA: {{ .Values.hpa.main.minReplicas }}-{{ .Values.hpa.main.maxReplicas }} replicas
{{- end }}
{{- if .Values.hpa.worker.enabled }}
  • Worker HPA: {{ .Values.hpa.worker.minReplicas }}-{{ .Values.hpa.worker.maxReplicas }} replicas
{{- end }}
{{- if .Values.hpa.webhookProcessor.enabled }}
  • Webhook HPA: {{ .Values.hpa.webhookProcessor.minReplicas }}-{{ .Values.hpa.webhookProcessor.maxReplicas }} replicas
{{- end }}

💡 Next Steps:
  1. Configure your first workflow
  2. Set up webhook endpoints for external integrations
  3. Review the execution data retention policies
  4. Monitor resource usage and adjust HPA settings if needed

📚 Documentation: https://docs.n8n.io/
🐛 Issues: https://github.com/idirouhab/n8n-helm-chart/issues

Happy automating! 🚀
